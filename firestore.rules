/**
 * @fileoverview Firestore Security Rules for the sales application prototype.
 *
 * Core Philosophy:
 * This ruleset is in prototyping mode. All users, even unauthenticated ones,
 * have full read and write access to all collections. This is highly insecure
 * and MUST be changed before deployment.
 *
 * Data Structure:
 * - /users/{userId}: Stores user profile information.
 * - /accounts-db/{accountId}: Stores sales account data.
 * - /contacts/{contactId}: Stores contact information related to accounts.
 * - /account-products/{accountProductId}: Stores notes about specific products for accounts.
 * - /products/{productId}: Stores the global catalog of products.
 *
 * Key Security Decisions:
 * - **INSECURE PROTOTYPE MODE**: All read and write access is granted to all users.
 * - No data validation is performed beyond ensuring relationships are correctly formed.
 *
 * WARNING: These rules are ONLY for prototyping and MUST NOT be used in a production environment.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Grants all users read and write access to user profiles during prototyping.
     * @path /users/{userId}
     * @allow (create, update, delete) Any user can create, update, or delete a user profile.
     * @allow (get, list) Any user can read user profile information.
     * @deny None (INSECURE: all access is granted).
     * @principle INSECURE: Grants all users full access to user profiles for prototyping purposes.
     */
    match /users/{userId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Grants all users read and write access to accounts during prototyping.
     * @path /accounts-db/{accountId}
     * @allow (create, update, delete) Any user can create, update, or delete an account.
     * @allow (get, list) Any user can read account information.
     * @deny None (INSECURE: all access is granted).
     * @principle INSECURE: Grants all users full access to accounts for prototyping purposes.
     */
    match /accounts-db/{accountId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Grants all users read and write access to contacts during prototyping.
     * @path /contacts/{contactId}
     * @allow (create, update, delete) Any user can create, update, or delete a contact.
     * @allow (get, list) Any user can read contact information.
     * @deny None (INSECURE: all access is granted).
     * @principle INSECURE: Grants all users full access to contacts for prototyping purposes.
     */
    match /contacts/{contactId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Grants all users read and write access to account product notes during prototyping.
     * @path /account-products/{accountProductId}
     * @allow (create, update, delete) Any user can create, update, or delete an account product note.
     * @allow (get, list) Any user can read account product note information.
     * @deny None (INSECURE: all access is granted).
     * @principle INSECURE: Grants all users full access to account product notes for prototyping purposes.
     */
    match /account-products/{accountProductId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Grants all users read and write access to products during prototyping.
     * @path /products/{productId}
     * @allow (create, update, delete) Any user can create, update, or delete a product.
     * @allow (get, list) Any user can read product information.
     * @deny None (INSECURE: all access is granted).
     * @principle INSECURE: Grants all users full access to products for prototyping purposes.
     */
    match /products/{productId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}