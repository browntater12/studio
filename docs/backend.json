{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        }
      }
    },
    "Account": {
      "title": "Account",
      "type": "object",
      "description": "Represents a sales account.",
      "properties": {
        "accountNumber": {
          "type": "string",
          "description": "Account number."
        },
        "name": {
          "type": "string",
          "description": "Name of the account."
        },
        "industry": {
          "type": "string",
          "description": "Industry of the account."
        },
        "status": {
          "type": "string",
          "enum": ["lead", "customer"],
          "description": "Status of the account."
        },
        "details": {
          "type": "string",
          "description": "Details about the account."
        },
        "address": {
          "type": "string",
          "description": "Address for the account, required for leads."
        }
      },
      "required": ["name", "status"]
    },
    "Contact": {
      "title": "Contact",
      "type": "object",
      "description": "Represents a contact associated with an account.",
      "properties": {
        "accountNumber": {
          "type": "string",
          "description": "The account number of the account this contact is associated with."
        },
        "name": {
          "type": "string",
          "description": "Name of the contact."
        },
        "phone": {
          "type": "string",
          "description": "Phone number of the contact."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Email address of the contact."
        },
        "location": {
          "type": "string",
          "description": "Location of the contact."
        },
        "isMainContact": {
          "type": "boolean",
          "description": "Indicates if this is the main contact for the account."
        },
        "avatarUrl": {
            "type": "string",
            "description": "URL for the contact's avatar."
        }
      },
      "required": ["accountNumber", "name", "phone", "email", "location", "isMainContact"]
    },
    "Product": {
      "title": "Product",
      "type": "object",
      "description": "Represents a product in the catalog.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the product."
        },
        "productNumber": {
          "type": "string",
          "description": "Product number."
        },
        "volumes": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["pails", "drums", "totes", "bulk"]
          },
          "description": "Available volume selections."
        }
      },
      "required": ["name", "productNumber", "volumes"]
    },
    "AccountProductNote": {
      "title": "AccountProductNote",
      "type": "object",
      "description": "Represents a note about a specific product for an individual account.",
      "properties": {
        "accountId": {
          "type": "string",
          "description": "Reference to Account."
        },
        "productId": {
          "type": "string",
          "description": "Reference to Product."
        },
        "notes": {
          "type": "string",
          "description": "Note about the product for the specific account."
        },
        "priceType": {
            "type": "string",
            "enum": ["spot", "bid"]
        },
        "bidFrequency": {
            "type": "string",
            "enum": ["monthly", "quarterly", "yearly"]
        },
        "lastBidPrice": {
            "type": "number"
        },
        "winningBidPrice": {
            "type": "number"
        },
        "priceDetails": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["quote", "last_paid"]
            },
            "price": {
              "type": "number"
            }
          }
        }
      },
      "required": ["accountId", "productId", "notes"]
    }
  },
  "auth": {
    "providers": ["anonymous", "password"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Stores public-facing user profile information."
    },
    "/accounts-db/{accountId}": {
      "schema": {
        "$ref": "#/entities/Account"
      },
      "description": "Top-level collection for all sales accounts."
    },
    "/contacts/{contactId}": {
      "schema": {
        "$ref": "#/entities/Contact"
      },
      "description": "Top-level collection for all contacts, linked to accounts by accountNumber."
    },
    "/account-products/{accountProductId}": {
      "schema": {
        "$ref": "#/entities/AccountProductNote"
      },
      "description": "Top-level collection for product notes, linking an account to a product."
    },
    "/products/{productId}": {
      "schema": {
        "$ref": "#/entities/Product"
      },
      "description": "Global collection for all available products."
    }
  }
}
